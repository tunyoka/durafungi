<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0" />
    <title>Gourmet Grow Blocks – DuraFungi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @font-face {
            font-family: 'Montserrat';
            src: url('/assets/fonts/MontserratVariableFontwght.ttf') format('truetype');
            font-display: swap;
        }

        :root {
            --black: #1F1F1F;
            --white: #F5F5F5;
            --beige: #D8C3A5;
            --green: #3B7A57;
            --rust: #8B5E3C;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background: #ffffff;
            color: var(--black);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden;
        }

        header {
            background: linear-gradient(to bottom, var(--beige) 0%, #fff 100%);
            padding: 0.75rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .nav-toggle {
            display: block;
            cursor: pointer;
            padding: 0.5rem;
        }

        .nav-toggle-line {
            width: 24px;
            height: 2px;
            background: var(--black);
            margin: 5px 0;
        }

        #mobile-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            flex-direction: column;
            padding: 1.5rem;
            gap: 1rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }

        #mobile-menu.open {
            display: flex;
        }

        @media (min-width: 768px) {
            .nav-toggle {
                display: none;
            }

            #mobile-menu {
                display: none !important;
            }
        }

        .page-section {
            padding: 2rem 1.25rem;
        }

        .product-card {
            background: #fff;
            border: 2px solid #f3f4f6;
            transition: all 0.3s ease;
            border-radius: 1.5rem;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .product-card.has-items {
            border-color: var(--green);
            background-color: #f0fdf4;
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
        }

        .product-card.added-flash {
            outline: 3px solid rgba(59, 122, 87, 0.35);
            transition: outline 0.15s;
        }

        .save-badge {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--rust);
            color: white;
            font-size: 11px;
            font-weight: 800;
            padding: 4px 12px;
            border-bottom-left-radius: 12px;
        }

        .qty-input {
            width: 56px;
            text-align: center;
            font-weight: bold;
            font-size: 1.25rem;
            background: transparent;
            border: none;
        }

        .qty-btn {
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background: #f3f4f6;
            border-radius: 50%;
            font-weight: bold;
            font-size: 1.25rem;
            touch-action: manipulation;
        }

        .add-btn {
            margin-top: 1rem;
            background: var(--green);
            color: white;
            font-weight: 800;
            padding: 0.9rem;
            border-radius: 0.9rem;
            transition: 0.15s;
        }

        .add-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }

        .hidden {
            display: none;
        }

        /* Mini-cart styles - same as fresh.html */
        #cart-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            width: 340px;
            max-height: 70vh;
            overflow-y: auto;
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            display: none;
            z-index: 200;
        }

        #cart-dropdown.open {
            display: block;
        }

        @media (max-width: 767px) {
            .page-section {
                padding: 1.5rem 1rem;
            }

            #cart-dropdown {
                width: 100%;
                left: 0;
                right: 0;
                border-radius: 0;
            }
        }
    </style>
</head>

<body>
    <header>
        <a href="index.html">
            <img src="https://s3.ap-southeast-2.amazonaws.com/durafungi.com/assets/img/logo.png" alt="Dura Fungi"
                class="h-10 md:h-12" />
        </a>

        <nav class="hidden md:flex gap-6 text-sm font-semibold">
            <a href="index.html" class="hover:text-[#3B7A57]">Shop</a>
            <a href="fresh.html" class="hover:text-[#3B7A57]">Fresh Mushrooms</a>
            <a href="grow-blocks.html" class="text-[#3B7A57]">Grow Blocks</a>
            <a href="wholesale.html" class="hover:text-[#3B7A57]">Wholesale</a>
        </nav>

        <!-- Shared Mini Cart -->
        <div class="relative">
            <button id="cart-toggle" class="relative p-2" aria-label="Cart">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-gray-700" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
                <span id="cart-badge"
                    class="absolute -top-1 -right-1 bg-green-600 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center hidden">0</span>
            </button>

            <div id="cart-dropdown" class="mt-2">
                <div class="p-4 border-b">
                    <h3 class="font-bold text-lg">Your Cart</h3>
                </div>
                <div id="cart-items" class="p-4 space-y-3"></div>
                <div id="cart-empty" class="p-8 text-center text-gray-500">Your cart is empty</div>
                <div class="p-4 border-t">
                    <div class="flex items-center justify-between mb-2">
                        <div class="font-bold">Total</div>
                        <div id="cart-total" class="font-bold">$0.00</div>
                    </div>
                    <div id="mode-hint" class="text-xs text-gray-500 mb-4"></div>
                    <div id="email-section" class="mb-4 hidden">
                        <label for="customer-email" class="block text-sm font-bold mb-2">Email (required for
                            subscriptions)</label>
                        <input id="customer-email" type="email" placeholder="you@example.com"
                            class="w-full rounded-xl border px-4 py-3" />
                        <p id="email-error" class="text-red-500 text-sm mt-1 hidden">Please enter a valid email.</p>
                    </div>
                    <button id="proceed-btn" disabled class="w-full text-white py-4 rounded-full font-bold text-lg"
                        style="background: #9ca3af;">
                        Proceed to Checkout
                    </button>
                    <p id="checkout-status" class="text-sm mt-2 text-gray-500 text-center"></p>
                </div>
            </div>
        </div>

        <button class="nav-toggle" onclick="toggleMenu()">
            <div class="nav-toggle-line"></div>
            <div class="nav-toggle-line"></div>
            <div class="nav-toggle-line"></div>
        </button>

        <div id="mobile-menu">
            <a href="index.html" class="font-bold py-2 border-b">Shop</a>
            <a href="fresh.html" class="font-bold py-2 border-b">Fresh Mushrooms</a>
            <a href="grow-blocks.html" class="font-bold py-2 border-b text-[#3B7A57]">Grow Blocks</a>
            <a href="wholesale.html" class="font-bold py-2">Wholesale</a>
        </div>
    </header>

    <main class="flex-grow">
        <section class="max-w-6xl mx-auto px-6 py-12">
            <div class="text-center mb-12">
                <h1 class="text-4xl md:text-6xl font-bold mb-4">Mushroom <span class="text-[#3B7A57]">Grow Blocks</span>
                </h1>
                <p class="text-gray-600 max-w-2xl mx-auto">Ready-to-fruit 3kg gourmet blocks. Harvest $120–$180 worth of
                    fresh mushrooms at home. Grown in Adelaide, shipped Australia-wide.</p>
                <p class="text-gray-500 mt-6 text-sm">Add a subscription plan to save 20% and get regular deliveries, or
                    buy one-off.</p>
            </div>

            <!-- Grow Blocks -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-20">
                <!-- Blue-Grey Oyster -->
                <div class="product-card" id="card-blue-oyster">
                    <div class="save-badge">SAVE 20%</div>
                    <img src="https://s3.ap-southeast-2.amazonaws.com/durafungi.com/assets/img/blue-grey-oyster-mushroom-grain-spawn-kit.webp"
                        class="h-56 w-full object-cover" alt="Blue-Grey Oyster">
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-xl">Blue-Grey Oyster</h3>
                            <span
                                class="text-[10px] bg-gray-100 px-2 py-1 rounded font-bold text-gray-500 uppercase">3KG
                                Block</span>
                        </div>
                        <p class="text-sm text-gray-500 mb-4">Yields 750g–1.5kg ($120 Value). High producer, perfect for
                            beginners.</p>
                        <div class="flex justify-between items-center">
                            <div class="text-2xl font-bold text-[#3B7A57]">$55.00 <span
                                    class="text-sm font-normal text-gray-500 line-through ml-2">$68.75</span></div>
                            <div class="flex items-center gap-3">
                                <button class="qty-btn" onclick="updateQty('blue-oyster', -1)">-</button>
                                <input id="qty-blue-oyster" class="qty-input" value="0" readonly>
                                <button class="qty-btn" onclick="updateQty('blue-oyster', 1)">+</button>
                            </div>
                        </div>
                        <button id="add-blue-oyster" class="add-btn mt-4" disabled
                            onclick="addToCartFromPage('blue-oyster')">
                            Add to Cart
                        </button>
                    </div>
                </div>

                <!-- Lion's Mane -->
                <div class="product-card" id="card-lions-mane">
                    <div class="save-badge">SAVE 20%</div>
                    <img src="https://s3.ap-southeast-2.amazonaws.com/durafungi.com/assets/img/lion's_mane_mushroom_growing_kit.webp"
                        class="h-56 w-full object-cover" alt="Lion's Mane">
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-xl">Lion's Mane</h3>
                            <span
                                class="text-[10px] bg-gray-100 px-2 py-1 rounded font-bold text-gray-500 uppercase">3KG
                                Block</span>
                        </div>
                        <p class="text-sm text-gray-500 mb-4">Yields 600g–1.2kg ($150 Value). Gourmet favorite with
                            lobster-like texture.</p>
                        <div class="flex justify-between items-center">
                            <div class="text-2xl font-bold text-[#3B7A57]">$55.00 <span
                                    class="text-sm font-normal text-gray-500 line-through ml-2">$68.75</span></div>
                            <div class="flex items-center gap-3">
                                <button class="qty-btn" onclick="updateQty('lions-mane', -1)">-</button>
                                <input id="qty-lions-mane" class="qty-input" value="0" readonly>
                                <button class="qty-btn" onclick="updateQty('lions-mane', 1)">+</button>
                            </div>
                        </div>
                        <button id="add-lions-mane" class="add-btn mt-4" disabled
                            onclick="addToCartFromPage('lions-mane')">
                            Add to Cart
                        </button>
                    </div>
                </div>

                <!-- Shiitake -->
                <div class="product-card" id="card-shiitake">
                    <div class="save-badge">SAVE 20%</div>
                    <img src="https://s3.ap-southeast-2.amazonaws.com/durafungi.com/assets/img/shiitake_guide.webp"
                        class="h-56 w-full object-cover" alt="Shiitake">
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-xl">Shiitake Block</h3>
                            <span
                                class="text-[10px] bg-gray-100 px-2 py-1 rounded font-bold text-gray-500 uppercase">3KG
                                Block</span>
                        </div>
                        <p class="text-sm text-gray-500 mb-4">Yields 800g–1.4kg ($140 Value). The umami king. Meaty
                            texture, beautiful aroma.</p>
                        <div class="flex justify-between items-center">
                            <div class="text-2xl font-bold text-[#3B7A57]">$60.00 <span
                                    class="text-sm font-normal text-gray-500 line-through ml-2">$75.00</span></div>
                            <div class="flex items-center gap-3">
                                <button class="qty-btn" onclick="updateQty('shiitake', -1)">-</button>
                                <input id="qty-shiitake" class="qty-input" value="0" readonly>
                                <button class="qty-btn" onclick="updateQty('shiitake', 1)">+</button>
                            </div>
                        </div>
                        <button id="add-shiitake" class="add-btn mt-4" disabled onclick="addToCartFromPage('shiitake')">
                            Add to Cart
                        </button>
                    </div>
                </div>

                <!-- Maitake -->
                <div class="product-card" id="card-maitake">
                    <div class="save-badge">SAVE 20%</div>
                    <img src="https://s3.ap-southeast-2.amazonaws.com/durafungi.com/assets/img/Maitake+mushroom.webp"
                        class="h-56 w-full object-cover" alt="Maitake">
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-2">
                            <h3 class="font-bold text-xl">Maitake Block</h3>
                            <span
                                class="text-[10px] bg-gray-100 px-2 py-1 rounded font-bold text-gray-500 uppercase">3KG
                                Block</span>
                        </div>
                        <p class="text-sm text-gray-500 mb-4">Yields 500g–1kg ($180 Value). Hen of the Woods. Rare,
                            earthy, and nutty.</p>
                        <div class="flex justify-between items-center">
                            <div class="text-2xl font-bold text-[#3B7A57]">$70.00 <span
                                    class="text-sm font-normal text-gray-500 line-through ml-2">$87.50</span></div>
                            <div class="flex items-center gap-3">
                                <button class="qty-btn" onclick="updateQty('maitake', -1)">-</button>
                                <input id="qty-maitake" class="qty-input" value="0" readonly>
                                <button class="qty-btn" onclick="updateQty('maitake', 1)">+</button>
                            </div>
                        </div>
                        <button id="add-maitake" class="add-btn mt-4" disabled onclick="addToCartFromPage('maitake')">
                            Add to Cart
                        </button>
                    </div>
                </div>

                <!-- Mixed Bundle -->
                <div class="product-card col-span-1 md:col-span-2" id="card-mixed-bundle">
                    <div class="flex flex-col md:flex-row h-full">
                        <img src="https://s3.ap-southeast-2.amazonaws.com/durafungi.com/assets/img/learning-workshop.webp"
                            class="w-full md:w-1/3 h-56 md:h-auto object-cover">
                        <div class="p-8 flex flex-col justify-center flex-grow">
                            <h3 class="font-bold text-2xl">Variety Bundle (4 Blocks)</h3>
                            <p class="text-gray-500 mb-6 font-medium">Includes 1x each: Lion's Mane, Shiitake, Oyster,
                                and Maitake. Total yield up to 5kg+.</p>
                            <div class="flex justify-between items-center">
                                <div class="text-3xl font-bold text-[#3B7A57]">$180.00</div>
                                <div class="flex items-center gap-4">
                                    <button class="qty-btn" onclick="updateQty('mixed-bundle', -1)">-</button>
                                    <input id="qty-mixed-bundle" class="qty-input text-xl" value="0" readonly>
                                    <button class="qty-btn" onclick="updateQty('mixed-bundle', 1)">+</button>
                                </div>
                            </div>
                            <button id="add-mixed-bundle" class="add-btn mt-6" disabled
                                onclick="addToCartFromPage('mixed-bundle')">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Essential Grow Gear -->
            <div class="mt-20">
                <h2 class="text-3xl font-bold mb-8 text-center">Essential Grow Gear</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-8 max-w-4xl mx-auto">
                    <div class="product-card" id="card-humidity-tent">
                        <div class="p-6 flex items-center gap-6">
                            <img src="https://s3.ap-southeast-2.amazonaws.com/durafungi.com/assets/img/grow-tent.webp"
                                class="w-24 h-24 rounded-xl object-cover">
                            <div class="flex-grow">
                                <h4 class="font-bold">Humidity Tent</h4>
                                <p class="text-sm text-gray-500">Reusable micro-climate tent.</p>
                                <p class="text-[#3B7A57] font-bold">$15.00</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <button class="qty-btn" onclick="updateQty('humidity-tent', -1)">-</button>
                                <input id="qty-humidity-tent" class="qty-input" value="0" readonly>
                                <button class="qty-btn" onclick="updateQty('humidity-tent', 1)">+</button>
                            </div>
                            <button id="add-humidity-tent" class="add-btn mt-4 hidden" disabled
                                onclick="addToCartFromPage('humidity-tent')">Add</button>
                        </div>
                    </div>

                    <div class="product-card" id="card-starter-kit">
                        <div class="p-6 flex items-center gap-6">
                            <img src="https://s3.ap-southeast-2.amazonaws.com/durafungi.com/assets/img/Fine-Mist-Spray-Bottle.webp"
                                class="w-24 h-24 rounded-xl object-cover">
                            <div class="flex-grow">
                                <h4 class="font-bold">Starter Tool Kit</h4>
                                <p class="text-sm text-gray-500">Mist bottle + sanitiser.</p>
                                <p class="text-[#3B7A57] font-bold">$20.00</p>
                            </div>
                            <div class="flex items-center gap-3">
                                <button class="qty-btn" onclick="updateQty('starter-kit', -1)">-</button>
                                <input id="qty-starter-kit" class="qty-input" value="0" readonly>
                                <button class="qty-btn" onclick="updateQty('starter-kit', 1)">+</button>
                            </div>
                            <button id="add-starter-kit" class="add-btn mt-4 hidden" disabled
                                onclick="addToCartFromPage('starter-kit')">Add</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-white py-12 text-center border-t text-gray-400 text-sm">© 2026 Dura Fungi. All rights reserved.
    </footer>

    <!-- Shared cart logic -->
    <script src="https://s3.ap-southeast-2.amazonaws.com/durafungi.com/assets/js/cart.js"></script>

    <!-- Page-specific glue -->
    <script>
        function toggleMenu() {
            document.getElementById('mobile-menu').classList.toggle('open');
        }

        // Full catalog from your original page
        const catalog = {
            'blue-oyster': {
                price: 'price_1Sj3wIB03V57KY6P5Qo8G0dm', // subscription price (20% off)
                label: 'Blue-Grey Oyster Block (Subscribe & Save 20%)',
                unitPrice: 44
            },
            'lions-mane': {
                price: 'price_1Sj49rB03V57KY6P8Mta48Vo',
                label: "Lion's Mane Block (Subscribe & Save 20%)",
                unitPrice: 44
            },
            'shiitake': {
                price: 'price_1Sj4EeB03V57KY6PBgce7tE3',
                label: 'Shiitake Block (Subscribe & Save 20%)',
                unitPrice: 48
            },
            'maitake': {
                price: 'price_1Sj4HaB03V57KY6PNTuJVdO5',
                label: 'Maitake Block (Subscribe & Save 20%)',
                unitPrice: 56
            },
            'mixed-bundle': {
                price: 'price_1Sj4KHB03V57KY6PD22wNUsp',
                label: 'Variety Bundle (4 Blocks)',
                unitPrice: 180
            },
            'humidity-tent': {
                price: 'price_1Sj4q9B03V57KY6PxInoLjWZ',
                label: 'Humidity Tent',
                unitPrice: 15
            },
            'starter-kit': {
                price: 'price_1Sj4zrB03V57KY6PMuYhW3xN',
                label: 'Starter Tool Kit',
                unitPrice: 20
            }
        };

        function flashAdded(cardId) {
            const el = document.getElementById(cardId);
            if (el) {
                el.classList.add('added-flash');
                setTimeout(() => el.classList.remove('added-flash'), 220);
            }
        }

        function updateQty(key, delta) {
            const input = document.getElementById(`qty-${key}`);
            if (!input) return;

            let qty = parseInt(input.value, 10) || 0;
            qty = Math.max(0, qty + delta);
            input.value = qty;

            const card = document.getElementById(`card-${key}`);
            if (card) card.classList.toggle('has-items', qty > 0);

            const btn = document.getElementById(`add-${key}`);
            if (btn) btn.disabled = (qty === 0);
        }

        function addToCartFromPage(key) {
            const item = catalog[key];
            if (!item) return;

            const qtyInput = document.getElementById(`qty-${key}`);
            const qty = parseInt(qtyInput?.value, 10) || 0;
            if (qty <= 0) return;

            const addBtn = document.getElementById(`add-${key}`);
            if (addBtn) {
                addBtn.disabled = true;
                addBtn.textContent = "Adding…";
            }

            const isSubscriptionBlock = ['blue-oyster', 'lions-mane', 'shiitake', 'maitake'].includes(key);

            DF_CART.addToCart({
                price: item.price,
                quantity: qty,
                recurring: isSubscriptionBlock,
                label: item.label,
                unitPrice: item.unitPrice
            });

            qtyInput.value = 0;
            updateQty(key, 0);
            flashAdded(`card-${key}`);

            DF_CART.openCart?.();

            if (addBtn) addBtn.textContent = "Add to Cart";
        }

        // Init
        window.addEventListener("load", () => {
            DF_CART?.updateCartUI?.();
        });
    </script>
</body>

</html>